<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<link  rel="stylesheet" type="text/css" href="style.css">
</head>
<body id="page">
	<div class="heading1">Inequalities in well-being</div>
	<div class="heading1Sub">Are all OECD countries equally unequal?</div>
	<div class="intro_text">See how well-being in OECD countries is distributed between individuals, generations and genders, and between people from different education levels and migrant backgrounds.</div>


	<input id="toggle" type="checkbox" >
  	<label id="hideShowToggle" for="toggle">More...</label>
	<div id="expand" >
    <section>Much of the debate on inequality has traditionally focused on economic resources and with good reasons — generally in OECD countries the average disposable income of the richest 20% is 5.4 times higher than that of the poorest 20%. Meanwhile the wealthiest 10% of households holds more than half of the average country’s wealth. But, fault-lines of divide exist in many other aspects of our lives. Did you know that young people are more than twice as likely to be unemployed as those aged over 25? And that men with only primary education live almost 8 years less on average than university-educated men? Click the OECD logo or visit <a href="http://oe.cd/how-is-life">oe.cd/how-is-life</a> for more information on the data and OECD work on well-being.
    </section>
	</div>
	<br/>
	<div id="country_sel">
		<div class="dropdown_text">Highlight a country: </div>
		<select id="country_dropdown" onchange="displayIneq(this.value)";>
			 <option value="AUS" selected="selected">Australia</option>
			 <option value="AUT" >Austria</option>
			 <option value="BEL" >Belgium</option>
			 <option value="CAN" >Canada</option>
			 <option value="CHL" >Chile</option>
			 <option value="CZE" >Czech Republic</option>
			 <option value="DNK" >Denmark</option>
			 <option value="EST" >Estonia</option>
			 <option value="FIN" >Finland</option>
			 <option value="FRA" >France</option>
			 <option value="DEU" >Germany</option>
			 <option value="GRC" >Greece</option>
			 <option value="HUN" >Hungary</option>
			 <option value="ISL" >Iceland</option>
			 <option value="IRL" >Ireland</option>
			 <option value="ISR" >Israel</option>
			 <option value="ITA" >Italy</option>
			 <option value="JPN" >Japan</option>
			 <option value="KOR" >Korea</option>
			 <option value="LVA" >Latvia</optionion>
			 <option value="LUX" >Luxembourg</option>
			 <option value="MEX" >Mexico</option>
			 <option value="NLD" >Netherlands</option>
			 <option value="NZL" >New Zealand</option>
			 <option value= "NOR">Norway</option>
			 <option value="POL" >Poland</option>
			 <option value="PRT" >Portugal</option>
			 <option value="SVK" >Slovak Republic</option>
			 <option value="SVN" >Slovenia</option>
			 <option value="ESP" >Spain</option>
			 <option value="SWE" >Sweden</option>
			 <option value="CHE" >Switzerland</option>
			 <option value="TUR" >Turkey</option>
			 <option value="GBR" >United Kingdom</option>
			 <option value="USA" >United States</option>
		</select>
	</div>
	<div id="indic_sel">
		<div class="dropdown_text" >Pick your indicator:</div>
		<select id="indic_dropdown" onchange="displayIneq(this.value)";>
			<option value="IW_HADI" selected="selected">Net household adjusted disposable income</option>
			<option value="IW_HNFW" >Household net wealth</option>
			<option value="JE_EMPL" >Employment rate</option>
			<option value="JE_PE" >Average annual gross earnings per full-time employee</option>
			<option value="JE_LP" >Low pay</option>
			<option value="JE_LTUR" >Long-term unemployment rate</option>
			<option value="HO_NUMR" >Rooms per person</option>
			<option value="HO_EXP" >Housing expenditure</option>
			<option value="WL_EWLH" >Employees working very long hours</option>
			<option value="WL_LEPC" >Time devoted to leisure and personal care</option>
			<option value="HS_LEB" >Life expectancy at birth</option>
			<option value="HS_SFRH" >Perceived health status</option>
			<option value="ES_EDUA" >Educational attainment of the adult working-aged population</option>
			<option value="ES_ADCO" >Adult competencies (PIAAC)</option>
			<option value="ES_STCS" >Cognitive skills of 15 year old students</option>
			<option value="SC_SNTWS" >Perceived social network support</option>
			<option value="CG_SAYG" >Having a say on what the government does</option>
			<option value="CG_VOTO" >Voter turnout</option>
			<option value="EQ_SATW" >Satisfaction with water quality</option>
			<option value="EQ_AIRP" >Air pollution</option>
			<option value="PS_HOMI" >Homicides rates</option>
			<option value="PS_SFRV" >Feeling safe walking alone at night</option>
			<option value="SW_LIFS" >Life satisfaction</option>
		<select>
	</div>

	<br/>
	<div id="toolbar">
		<div class="button active" id="comparison">Country comparison</div>
		<div class="button " id="heatmap">Inequality for one country </div>
	</div>
</div>
	<!-- ***********************
	    MAP
 	***********************-->

	<!--<div id="mapVisualisation"></div>
	<br/>-->
	<!-- ***********************
	    COUNTRY DETAIL
 	***********************-->
 	<div id="countryDetail">
		<!-- ***********************
		    INEQUALITY CARD
	 	***********************-->
	 	<div id="inequalityCard">
			<div class="explanations">Select a country and a well-being indicator to see the country’s average performance relative to other OECD countries.</div>
			<div class="pickedCountry"></div>
			<br/>
			<div id="ineqCard">
				<div class="heading2" ><span id="pickedindicator">the selected indicator</span></div>
		
				<div id="distriIndicViz"></div>
				<br/>
				<div class="explanations">See how the performance for this indicator varies in society between individuals, generations and genders, and between people from different education levels and migrant backgrounds.</div>


				<div id="ineqIndic_v1"></div>
			</div>
		</div>
 		<!-- ***********************
	    End INEQUALITY CARD
 		***********************-->

		<!-- ***********************
			HEATMAP
		***********************-->

	 	<div id="countryCard">
			<div class="explanations">Does high inequality in income go hand-in-hand with high inequality in education or civic participation? Are some population groups more at risk of facing disadvantages? <br/><br/>The chart below shows how a country is doing in the 11 well-being dimensions explored in <a href="http://oe.cd/how-is-life">How’s Life?</a><br/><br/>Grey squares indicate that data or inequality measures are not available for those well-being indicators </div>
			<div class="pickedCountry"></div>
			<br/>
			<div class="heading2" >Inequalities for all indicators</div>
			<div id="heatMapVisualisation"></div>
		</div>


 	</div>
 	<div class="button btn_share" id="shareLink">
		<object type="image/svg+xml" height="14" width="15" data="img/share_neu.svg">
    	</object class="text_btn"> Share 
	</div>
 	<div class="button btn_share" id="downloadLink">
		<object type="image/svg+xml" height="14" width="15" data="img/download.svg">
    	</object class="text_btn"> Download 
	</div>
 	<div class="button btn_share" id="helpLink">
		<object type="image/svg+xml" height="14" width="15" data="img/help.svg">
    	</object class="text_btn"> Help 
	</div>
	<div class="siteFooterBar">
        <a href="http://www.oecd.org" target="_blank"><img  src="img/SYMBOL_20cm.png" ></img></a>
        <!--<div >2017 © OECD</div>-->
	</div>

	<script src="js/embed.js"></script>
<!-- ***********************
	    TOOLTIPS 
 ***********************-->
	<div id="avgIndicTooltip" class="hidden">
		<b><span id="countryName">country</span></b><br/><span id="indicatorName">indicator</span><br/><i><span id="indicatorValue">value</span></i><br/> <span id="indicatorMeasure">measure</span>
	</div>


	<div id="tooltipVarIcons" class="hidden">
		<b><span id="heatIndicatorName">Name</span></b><br/><span id="heatIndicatorDef">Definition</span><br/>
	</div>
	<div id="tooltipIneqIcons" class="hidden">
		<b><span id="inequalityType">inequality type</span></b><br/><span id="inequalityDef">Definition</span><br/><span id="inequalityMessage"></span>
	</div>
	<div id="tooltipHeatValue" class="hidden">
		<b><span id="heatIneqType">Type</span></b><br/><span id="heatIndName">indicator</span><br/><span id="heatValue">value</span><br/>
	</div>
		<br/>
		<br/>
		<br/>
<script src="libs/d3.v4.min.js"></script>
<script src="js/setupbutton.js"></script>
<script src="js/displayIneq.js"></script>
<script src="js/normalize.js"></script>
<script src="js/distriIndicViz.js"></script>
<script src="js/IneqIndic.js"></script>
<script src="js/Heatmap.js"></script>
<script type="text/javascript">

/** SET main variables for the visualisation**/
	//var widthMap=document.getElementById('mapVisualisation').offsetWidth;
	var width=document.getElementById('inequalityCard').offsetWidth;
	//var heightMap=500;
	var marginRight=5/100*width;
	var marginLeft=5/100*width;
	var marginTop=5/100*width;
	var marginBottom=5/100*width;


/** LOAD ALL DATA **/


	var relationshipList=[];
	d3.tsv("data/relationship.tsv",function(error, data) {
		data.forEach(function(d){
				relationshipList.push(d)
			})

	})

	var indicatorList=[];
	d3.tsv("data/indicator_list.tsv",function(error, data) {
		data.forEach(function(d){
				indicatorList.push(d)
			})

	})

	var dimensionList=[];
	d3.csv("data/dimension_list.csv",function(error, data) {
		data.forEach(function(d){
				dimensionList.push(d)
			})

	})

	var inequalityList=[];
	d3.csv("data/inequality.csv",function(error, data) {
		data.forEach(function(d){
				inequalityList.push(d)
			})

	})

	var correspondanceISO=[];
	d3.csv("data/codeIso.csv",function(error, data) {
		data.forEach(function(d){
				correspondanceISO.push(d)
			})

	})
	
	var datatot=[];
	var counter=0; // define counter to launch function at the end of the forEach
	d3.tsv("data/tot_data.tsv",function(error, data) {
		data.forEach(function(d){
				datatot.push(d);
				counter++; 
         		if (counter === data.length) {
             		normalize();
         		}
			})

	})


	var distriData; // placeholder for distribution viz
/**Rounding principle**/
	var f = d3.format(".1f");


/** Define Color Scale **/
	var colorScale = d3.scaleOrdinal()
		.domain(["Housing","Jobs and earnings","Income and wealth","Social connections","Education and skills","Environmental quality","Civic engagement and governance","Health status","Life Satisfaction","Personal security","Work-Life Balance"])
		.range(["#3DA594","#237FBD","#2CA3E0","#CE485D","#7EA943","#30A457","#DCA922","#7C3A73","#E26237","#606060","#962828"]);

/** Define Circle Scale **/
	var scale = d3.scaleSqrt()

/** Create SVG DISTRIBUTION INDICATOR**/
    	var distributionIndic = d3.select("#distriIndicViz").append("svg")



/** Create SVG INEQUALITY CARD **/
		
    	var ineqIndic = d3.select("#ineqIndic_v1").append("svg")


/** Create SVG HEATMAP**/
    	var heatmap = d3.select("#heatMapVisualisation").append("svg")


//INITIALIZE BUTTONS

setupButtons();

</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51983915-1', 'auto');
  ga('send', 'pageview');

</script>
</body>